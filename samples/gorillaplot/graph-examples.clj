;; gorilla-repl.fileformat = 2

;; **
;;; # Graphing tests
;;; 
;;; A showcase of gorilla-plot graph types. Here I load both the vega and core namespaces. This is useful for development, but if you're just using the library then you only need to load the 'gorilla-plot.core namespace.
;; **

;; @@
; ADD DEPENDENCY
(use '[pinkgorilla.helper])
(pinkgorilla.helper/add-dependencies '[pinkgorilla.ui.gorilla-plot "0.8.4"])
;; @@
;; ->
;;; 
;; <-
;; =>
;;; ["^ ","~:type","list-like","~:open",["span",["^ ","~:class","clj-map"],"{"],"~:close",["span",["^ ","^2","clj-map"],"}"],"~:separator",["span",", "],"~:items",[["^ ","^0","list-like","^1",null,"^3",null,"^4",["span"," "],"^5",[["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","~:content",["span",["^ ","^2","clj-symbol"],"pinkgorilla.ui.gorilla-plot"],"~:value","pinkgorilla.ui.gorilla-plot"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"0.8.4\""],"^7","\"0.8.4\""]],"^7","[pinkgorilla.ui.gorilla-plot \"0.8.4\"]"],["^ ","^0","list-like","^1",["span",["^ ","^2","clj-set"],"#{"],"^3",["span",["^ ","^2","clj-set"],"}"],"^4",["span"," "],"^5",[["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"pinkgorilla.ui.gorilla-renderable"],"^7","pinkgorilla.ui.gorilla-renderable"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"2.0.9\""],"^7","\"2.0.9\""]],"^7","[pinkgorilla.ui.gorilla-renderable \"2.0.9\"]"],["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"org.clojure/clojure"],"^7","org.clojure/clojure"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"1.9.0-alpha14\""],"^7","\"1.9.0-alpha14\""]],"^7","[org.clojure/clojure \"1.9.0-alpha14\"]"]],"^7","#{[pinkgorilla.ui.gorilla-renderable \"2.0.9\"] [org.clojure/clojure \"1.9.0-alpha14\"]}"]],"^7","[[pinkgorilla.ui.gorilla-plot \"0.8.4\"] #{[pinkgorilla.ui.gorilla-renderable \"2.0.9\"] [org.clojure/clojure \"1.9.0-alpha14\"]}]"],["^ ","^0","list-like","^1",null,"^3",null,"^4",["span"," "],"^5",[["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"org.clojure/clojure"],"^7","org.clojure/clojure"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"1.9.0-alpha14\""],"^7","\"1.9.0-alpha14\""]],"^7","[org.clojure/clojure \"1.9.0-alpha14\"]"],["^ ","^0","html","^6",["span",["^ ","^2","clj-nil"],"nil"],"^7","nil"]],"^7","[[org.clojure/clojure \"1.9.0-alpha14\"] nil]"],["^ ","^0","list-like","^1",null,"^3",null,"^4",["span"," "],"^5",[["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"pinkgorilla.ui.gorilla-renderable"],"^7","pinkgorilla.ui.gorilla-renderable"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"2.0.9\""],"^7","\"2.0.9\""]],"^7","[pinkgorilla.ui.gorilla-renderable \"2.0.9\"]"],["^ ","^0","list-like","^1",["span",["^ ","^2","clj-set"],"#{"],"^3",["span",["^ ","^2","clj-set"],"}"],"^4",["span"," "],"^5",[["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"hiccup"],"^7","hiccup"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"1.0.5\""],"^7","\"1.0.5\""]],"^7","[hiccup \"1.0.5\"]"],["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"org.clojure/data.json"],"^7","org.clojure/data.json"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"0.2.6\""],"^7","\"0.2.6\""]],"^7","[org.clojure/data.json \"0.2.6\"]"]],"^7","#{[hiccup \"1.0.5\"] [org.clojure/data.json \"0.2.6\"]}"]],"^7","[[pinkgorilla.ui.gorilla-renderable \"2.0.9\"] #{[hiccup \"1.0.5\"] [org.clojure/data.json \"0.2.6\"]}]"],["^ ","^0","list-like","^1",null,"^3",null,"^4",["span"," "],"^5",[["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"org.clojure/data.json"],"^7","org.clojure/data.json"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"0.2.6\""],"^7","\"0.2.6\""]],"^7","[org.clojure/data.json \"0.2.6\"]"],["^ ","^0","html","^6",["span",["^ ","^2","clj-nil"],"nil"],"^7","nil"]],"^7","[[org.clojure/data.json \"0.2.6\"] nil]"],["^ ","^0","list-like","^1",null,"^3",null,"^4",["span"," "],"^5",[["^ ","^0","list-like","^1",["span",["^ ","^2","clj-vector"],"["],"^3",["span",["^ ","^2","clj-vector"],"]"],"^4",["span"," "],"^5",[["^ ","^0","html","^6",["span",["^ ","^2","clj-symbol"],"hiccup"],"^7","hiccup"],["^ ","^0","html","^6",["span",["^ ","^2","clj-string"],"\"1.0.5\""],"^7","\"1.0.5\""]],"^7","[hiccup \"1.0.5\"]"],["^ ","^0","html","^6",["span",["^ ","^2","clj-nil"],"nil"],"^7","nil"]],"^7","[[hiccup \"1.0.5\"] nil]"]],"^7","{[pinkgorilla.ui.gorilla-plot \"0.8.4\"] #{[pinkgorilla.ui.gorilla-renderable \"2.0.9\"] [org.clojure/clojure \"1.9.0-alpha14\"]}, [org.clojure/clojure \"1.9.0-alpha14\"] nil, [pinkgorilla.ui.gorilla-renderable \"2.0.9\"] #{[hiccup \"1.0.5\"] [org.clojure/data.json \"0.2.6\"]}, [org.clojure/data.json \"0.2.6\"] nil, [hiccup \"1.0.5\"] nil}"]
;; <=

;; @@
;; the .core dependencies RENDER vega charts
;  the .plot dependencies GENERATE VEGA SPEC (this is useful for debugging)
(ns pinkgorilla.demo.gorilla-plot
  (:require 
    [clojure.pprint]
    [pinkgorilla.ui.vega :refer [vega! module]]
    [pinkgorilla.ui.gorilla-plot.core :refer [list-plot bar-chart compose histogram plot]]))
    ;[pinkgorilla.ui.gorilla-plot.plot :refer [list-plot bar-chart compose histogram plot]]
        
;; @@
;; =>
;;; ["^ ","~:type","html","~:content",["span",["^ ","~:class","clj-nil"],"nil"],"~:value","nil"]
;; <=

;; **
;;; Some data to look at.
;; **

;; @@
(def d
  [1 3 5 7 9 5 4 6 9 8 3 5 6])
;; @@
;; ->
;;; 
;; <-
;; =>
;;; ["^ ","~:type","html","~:content",["span",["^ ","~:class","clj-var"],"#'pinkgorilla.demo.gorilla-plot/d"],"~:value","#'pinkgorilla.demo.gorilla-plot/d"]
;; <=

;; **
;;; List plot plots data in the style of a scatter plot by default.
;; **

;; @@
(list-plot d)
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:$schema","https://vega.github.io/schema/vega/v3.0.json","~:width",400,"~:height",247.2188,"~:padding",["^ ","~:top",10,"~:left",55,"~:bottom",40,"~:right",10],"^2",[["^ ","~:name","1eab9fe1-c260-4c64-ba16-19a97ec4357c","~:values",[["^ ","~:x",0,"~:y",1],["^ ","~:x",1,"~:y",3],["^ ","~:x",2,"~:y",5],["^ ","~:x",3,"~:y",7],["^ ","~:x",4,"~:y",9],["^ ","~:x",5,"~:y",5],["^ ","~:x",6,"~:y",4],["^ ","~:x",7,"~:y",6],["^ ","~:x",8,"~:y",9],["^ ","~:x",9,"~:y",8],["^ ","~:x",10,"~:y",3],["^ ","~:x",11,"~:y",5],["^ ","~:x",12,"~:y",6]]]],"~:marks",[["^ ","^0","symbol","~:from",["^ ","^2","1eab9fe1-c260-4c64-ba16-19a97ec4357c"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"~:y",["^ ","^A","y","^B","y"],"~:fill",["^ ","~:value","steelblue"],"~:fillOpacity",["^ ","^D",1]],"~:update",["^ ","~:shape","circle","~:size",["^ ","^D",70],"~:stroke",["^ ","^D","transparent"]],"~:hover",["^ ","^H",["^ ","^D",210],"^I",["^ ","^D","white"]]]]],"~:scales",[["^ ","^;","x","^0","linear","~:range","width","~:zero",false,"~:domain",["^ ","^2","1eab9fe1-c260-4c64-ba16-19a97ec4357c","^B","x"]],["^ ","^;","y","^0","linear","^L","height","~:nice",true,"^M",false,"^N",["^ ","^2","1eab9fe1-c260-4c64-ba16-19a97ec4357c","^B","y"]]],"~:axes",[["^ ","~:orient","bottom","^A","x"],["^ ","^Q","left","^A","y"]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; **
;;; There are a number of options that can be given to the plot. At the moment your best bet is to peek at the source code to see what they are.
;; **

;; @@
(list-plot d :joined true :plot-size 600 :aspect-ratio 6 :opacity 0.5 :plot-range [:all :all])
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:$schema","https://vega.github.io/schema/vega/v3.0.json","~:width",600,"~:height",100,"~:padding",["^ ","~:top",10,"~:left",55,"~:bottom",40,"~:right",10],"^2",[["^ ","~:name","5bc8376b-c66f-4a32-a7a3-b2fa1abf9404","~:values",[["^ ","~:x",0,"~:y",1],["^ ","~:x",1,"~:y",3],["^ ","~:x",2,"~:y",5],["^ ","~:x",3,"~:y",7],["^ ","~:x",4,"~:y",9],["^ ","~:x",5,"~:y",5],["^ ","~:x",6,"~:y",4],["^ ","~:x",7,"~:y",6],["^ ","~:x",8,"~:y",9],["^ ","~:x",9,"~:y",8],["^ ","~:x",10,"~:y",3],["^ ","~:x",11,"~:y",5],["^ ","~:x",12,"~:y",6]]]],"~:marks",[["^ ","^0","line","~:from",["^ ","^2","5bc8376b-c66f-4a32-a7a3-b2fa1abf9404"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"~:y",["^ ","^A","y","^B","y"],"~:stroke",["^ ","~:value","#FF29D2"],"~:strokeWidth",["^ ","^D",2],"~:strokeOpacity",["^ ","^D",0.5]]]]],"~:scales",[["^ ","^;","x","^0","linear","~:range","width","~:zero",false,"~:domain",["^ ","^2","5bc8376b-c66f-4a32-a7a3-b2fa1abf9404","^B","x"]],["^ ","^;","y","^0","linear","^H","height","~:nice",true,"^I",false,"^J",["^ ","^2","5bc8376b-c66f-4a32-a7a3-b2fa1abf9404","^B","y"]]],"~:axes",[["^ ","~:orient","bottom","^A","x"],["^ ","^M","left","^A","y"]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; **
;;; You can also plot bar charts. The first argument is the list of category names, the second the category values.
;; **

;; @@
(bar-chart (range (count d)) d)
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:$schema","https://vega.github.io/schema/vega/v3.0.json","~:width",400,"~:height",247.2188,"~:padding",["^ ","~:top",10,"~:left",55,"~:bottom",40,"~:right",10],"^2",[["^ ","~:name","392447cc-9e49-4360-b0fa-d7afe042a200","~:values",[["^ ","~:x",0,"~:y",1],["^ ","~:x",1,"~:y",3],["^ ","~:x",2,"~:y",5],["^ ","~:x",3,"~:y",7],["^ ","~:x",4,"~:y",9],["^ ","~:x",5,"~:y",5],["^ ","~:x",6,"~:y",4],["^ ","~:x",7,"~:y",6],["^ ","~:x",8,"~:y",9],["^ ","~:x",9,"~:y",8],["^ ","~:x",10,"~:y",3],["^ ","~:x",11,"~:y",5],["^ ","~:x",12,"~:y",6]]]],"~:marks",[["^ ","^0","rect","~:from",["^ ","^2","392447cc-9e49-4360-b0fa-d7afe042a200"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"^4",["^ ","^A","x","~:band",true,"~:offset",-1],"~:y",["^ ","^A","y","^B","y"],"~:y2",["^ ","^A","y","~:value",0]],"~:update",["^ ","~:fill",["^ ","^F","steelblue"],"~:opacity",["^ ","^F",1]],"~:hover",["^ ","^H",["^ ","^F","#FF29D2"]]]]],"~:scales",[["^ ","^;","x","^0","ordinal","~:range","width","~:domain",["^ ","^2","392447cc-9e49-4360-b0fa-d7afe042a200","^B","x"]],["^ ","^;","y","^L","height","~:nice",true,"^M",["^ ","^2","392447cc-9e49-4360-b0fa-d7afe042a200","^B","y"]]],"~:axes",[["^ ","~:orient","bottom","^A","x"],["^ ","^P","left","^A","y"]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; **
;;; It's interesting to look at the structure of a plot.
;; **

;; @@
(def p (list-plot d))
;; @@
;; =>
;;; ["^ ","~:type","html","~:content",["span",["^ ","~:class","clj-var"],"#'pinkgorilla.demo.gorilla-plot/p"],"~:value","#'pinkgorilla.demo.gorilla-plot/p"]
;; <=

;; **
;;; It's nothing but a clojure value, which is interpreted by Gorilla as a Vega visualisation and rendered appropriately.
;; **

;; @@
(clojure.pprint/pprint p)
;; @@
;; ->
;;; #object[pinkgorilla.ui.vega$vega_BANG_$reify__102192 0x366864f6 "pinkgorilla.ui.vega$vega_BANG_$reify__102192@366864f6"]
;; <-
;; =>
;;; ["^ ","~:type","html","~:content",["span",["^ ","~:class","clj-nil"],"nil"],"~:value","nil"]
;; <=

;; **
;;; This makes it easy to tweak plot properties 'after the fact'.
;; **

;; @@
(assoc-in p [:content :marks 0 :properties :enter :fill :value] "red")
;; @@

;; **
;;; Another key feature of gorilla-plot, is that because plots are values, it's straighforward to compose them. Here's another plot
;; **

;; @@
(def p2 (list-plot d :joined true :plot-range [:all [1 5]]))
;; @@
;; =>
;;; ["^ ","~:type","html","~:content",["span",["^ ","~:class","clj-var"],"#'pinkgorilla.demo.gorilla-plot/p2"],"~:value","#'pinkgorilla.demo.gorilla-plot/p2"]
;; <=

;; **
;;; And here we compose them to form a single plot. The axes and plot range are taken from the first plot given to compose.
;; **

;; @@
(compose p p2)
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:width",null,"~:height",null,"~:padding",null,"~:scales",null,"~:axes",null,"^2",[],"~:marks",[]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; **
;;; You can also plot functions.
;; **

;; @@
(vega! (plot (fn [x] (Math/sin x)) [0 10] :color "orange" :plot-points 50))
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:$schema","https://vega.github.io/schema/vega/v3.0.json","~:width",400,"~:height",247.2188,"~:padding",["^ ","~:top",10,"~:left",55,"~:bottom",40,"~:right",10],"^2",[["^ ","~:name","5414760c-ffcb-443a-9b5d-adb6633b2e56","~:values",[["^ ","~:x",0,"~:y",0],["^ ","~:x",0.20000000298023224,"~:y",0.19866933371588721],["^ ","~:x",0.4000000059604645,"~:y",0.3894183477986018],["^ ","~:x",0.6000000089406967,"~:y",0.5646424807741107],["^ ","~:x",0.800000011920929,"~:y",0.7173560992049138],["^ ","~:x",1.0000000149011612,"~:y",0.8414709928590282],["^ ","~:x",1.2000000178813934,"~:y",0.9320390924466878],["^ ","~:x",1.4000000208616257,"~:y",0.9854497335342509],["^ ","~:x",1.600000023841858,"~:y",0.999573602345334],["^ ","~:x",1.8000000268220901,"~:y",0.9738476247841598],["^ ","~:x",2.0000000298023224,"~:y",0.9092974144235391],["^ ","~:x",2.2000000327825546,"~:y",0.8084963845270198],["^ ","~:x",2.400000035762787,"~:y",0.6754631541798962],["^ ","~:x",2.600000038743019,"~:y",0.5155013386230065],["^ ","~:x",2.8000000417232513,"~:y",0.3349881108433251],["^ ","~:x",3.0000000447034836,"~:y",0.14111996380375377],["^ ","~:x",3.200000047683716,"~:y",-0.058374191029984236],["^ ","~:x",3.400000050663948,"~:y",-0.2555411510086444],["^ ","~:x",3.6000000536441803,"~:y",-0.4425204914007219],["^ ","~:x",3.8000000566244125,"~:y",-0.6118579357308002],["^ ","~:x",4.000000059604645,"~:y",-0.7568025342681227],["^ ","~:x",4.200000062584877,"~:y",-0.8715758030964995],["^ ","~:x",4.400000065565109,"~:y",-0.9516020940398271],["^ ","~:x",4.6000000685453415,"~:y",-0.9936910113209954],["^ ","~:x",4.800000071525574,"~:y",-0.9961646025774231],["^ ","~:x",5.000000074505806,"~:y",-0.9589242535286561],["^ ","~:x",5.200000077486038,"~:y",-0.8834546194166499],["^ ","~:x",5.4000000804662704,"~:y",-0.7727644364846162],["^ ","~:x",5.600000083446503,"~:y",-0.631266573154059],["^ ","~:x",5.800000086426735,"~:y",-0.4646021028811949],["^ ","~:x",6.000000089406967,"~:y",-0.2794154123530115],["^ ","~:x",6.200000092387199,"~:y",-0.0830893107497628],["^ ","~:x",6.400000095367432,"~:y",0.11654929956798761],["^ ","~:x",6.600000098347664,"~:y",0.31154145696653224],["^ ","~:x",6.800000101327896,"~:y",0.49411343923282436],["^ ","~:x",7.000000104308128,"~:y",0.6569866773569186],["^ ","~:x",7.200000107288361,"~:y",0.7936679291181636],["^ ","~:x",7.400000110268593,"~:y",0.898708144169618],["^ ","~:x",7.600000113248825,"~:y",0.9679197004863622],["^ ","~:x",7.800000116229057,"~:y",0.9985433516457859],["^ ","~:x",8.00000011920929,"~:y",0.9893582292784191],["^ ","~:x",8.200000122189522,"~:y",0.9407305152385956],["^ ","~:x",8.400000125169754,"~:y",0.8545988430890409],["^ ","~:x",8.600000128149986,"~:y",0.7343970108961424],["^ ","~:x",8.800000131130219,"~:y",0.584917086532953],["^ ","~:x",9.00000013411045,"~:y",0.41211836304966276],["^ ","~:x",9.200000137090683,"~:y",0.222889780458267],["^ ","~:x",9.400000140070915,"~:y",0.02477528542543854],["^ ","~:x",9.600000143051147,"~:y",-0.17432692208370587],["^ ","~:x",9.80000014603138,"~:y",-0.36647926512335605]]]],"~:marks",[["^ ","^0","line","~:from",["^ ","^2","5414760c-ffcb-443a-9b5d-adb6633b2e56"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"~:y",["^ ","^A","y","^B","y"],"~:stroke",["^ ","~:value","orange"],"~:strokeWidth",["^ ","^D",2],"~:strokeOpacity",["^ ","^D",1]]]]],"~:scales",[["^ ","^;","x","^0","linear","~:range","width","~:zero",false,"~:domain",["^ ","^2","5414760c-ffcb-443a-9b5d-adb6633b2e56","^B","x"]],["^ ","^;","y","^0","linear","^H","height","~:nice",true,"^I",false,"^J",["^ ","^2","5414760c-ffcb-443a-9b5d-adb6633b2e56","^B","y"]]],"~:axes",[["^ ","~:orient","bottom","^A","x"],["^ ","^M","left","^A","y"]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; **
;;; And, of course, these plots compose too.
;; **

;; @@
(compose
   (list-plot (map #(vector % (rand %)) (range 0 10 0.01)) :opacity 0.3 :symbol-size 50)
   (plot (fn [x] (* x (Math/pow (Math/sin x) 2))) [0 10]))
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:width",null,"~:height",null,"~:padding",null,"~:scales",null,"~:axes",null,"^2",[["^ ","~:name","8f979a1d-53d7-49b8-a427-9cdfe501449d","~:values",[["^ ","~:x",0,"~:y",0],["^ ","~:x",0.10000000149011612,"~:y",0.0009966711523935131],["^ ","~:x",0.20000000298023224,"~:y",0.0078939009494512],["^ ","~:x",0.30000000447034836,"~:y",0.026199658911198156],["^ ","~:x",0.4000000059604645,"~:y",0.06065866074476158],["^ ","~:x",0.5000000074505806,"~:y",0.11492442838019619],["^ ","~:x",0.6000000089406967,"~:y",0.19129268150732823],["^ ","~:x",0.7000000104308128,"~:y",0.2905115115092036],["^ ","~:x",0.800000011920929,"~:y",0.41167982458769947],["^ ","~:x",0.9000000134110451,"~:y",0.5522409625952036],["^ ","~:x",1.0000000149011612,"~:y",0.7080734423742749],["^ ","~:x",1.1000000163912773,"~:y",0.8736756420867389],["^ ","~:x",1.2000000178813934,"~:y",1.042436259352125],["^ ","~:x",1.3000000193715096,"~:y",1.2069777206570362],["^ ","~:x",1.4000000208616257,"~:y",1.3595556685107744],["^ ","~:x",1.5000000223517418,"~:y",1.4924943994216495],["^ ","~:x",1.600000023841858,"~:y",1.5986358422305347],["^ ","~:x",1.700000025331974,"~:y",1.6717784775992683],["^ ","~:x",1.8000000268220901,"~:y",1.7070825787734616],["^ ","~:x",1.9000000283122063,"~:y",1.701419318758029],["^ ","~:x",2.0000000298023224,"~:y",1.653643600395876],["^ ","~:x",2.1000000312924385,"~:y",1.5647738284498447],["^ ","~:x",2.2000000327825546,"~:y",1.4380661097740322],["^ ","~:x",2.3000000342726707,"~:y",1.2789753467037075],["^ ","~:x",2.400000035762787,"~:y",1.0950011506879587],["^ ","~:x",2.500000037252903,"~:y",0.8954221922070159],["^ ","~:x",2.600000038743019,"~:y",0.6909282486131232],["^ ","~:x",2.7000000402331352,"~:y",0.49316454088117767],["^ ","~:x",2.8000000417232513,"~:y",0.3142077010199231],["^ ","~:x",2.9000000432133675,"~:y",0.16599664468526332],["^ ","~:x",3.0000000447034836,"~:y",0.05974453344218124],["^ ","~:x",3.1000000461935997,"~:y",0.005359737795470119],["^ ","~:x",3.200000047683716,"~:y",0.010904147933380758],["^ ","~:x",3.300000049173832,"~:y",0.08211627504701455],["^ ","~:x",3.400000050663948,"~:y",0.22202435482841815],["^ ","~:x",3.500000052154064,"~:y",0.43067118124254894],["^ ","~:x",3.6000000536441803,"~:y",0.7049677976191696],["^ ","~:x",3.7000000551342964,"~:y",1.0386876427986966],["^ ","~:x",3.8000000566244125,"~:y",1.4226065285621616],["^ ","~:x",3.9000000581145287,"~:y",1.8447871837088208],["^ ","~:x",4.000000059604645,"~:y",2.2910003376371773],["^ ","~:x",4.100000061094761,"~:y",2.7452677415667375],["^ ","~:x",4.200000062584877,"~:y",3.190506445824144],["^ ","~:x",4.300000064074993,"~:y",3.6092483578629087],["^ ","~:x",4.400000065565109,"~:y",3.9844048590485874],["^ ","~:x",4.500000067055225,"~:y",4.300043277672282],["^ ","~:x",4.6000000685453415,"~:y",4.542140467191822],["^ ","~:x",4.700000070035458,"~:y",4.699278726962665],["^ ","~:x",4.800000071525574,"~:y",4.7632508650334975],["^ ","~:x",4.90000007301569,"~:y",4.729544306014563],["^ ","~:x",5.000000074505806,"~:y",4.597678688538202],["^ ","~:x",5.100000075995922,"~:y",4.3713772065510605],["^ ","~:x",5.200000077486038,"~:y",4.05855879623405],["^ ","~:x",5.300000078976154,"~:y",3.671145874000224],["^ ","~:x",5.4000000804662704,"~:y",3.224690369246717],["^ ","~:x",5.500000081956387,"~:y",2.7378289205739783],["^ ","~:x",5.600000083446503,"~:y",2.2315859569905676],["^ ","~:x",5.700000084936619,"~:y",1.7285506115833968],["^ ","~:x",5.800000086426735,"~:y",1.2519596798650976],["^ ","~:x",5.900000087916851,"~:y",0.8247238395284076],["^ ","~:x",6.000000089406967,"~:y",0.46843784294268836],["^ ","~:x",6.100000090897083,"~:y",0.20241718996047256],["^ ","~:x",6.200000092387199,"~:y",0.04280376871522386],["^ ","~:x",6.3000000938773155,"~:y",0.0017810755840114996],["^ ","~:x",6.400000095367432,"~:y",0.08693593236609283],["^ ","~:x",6.500000096857548,"~:y",0.30079822929542793],["^ ","~:x",6.600000098347664,"~:y",0.6405833336437111],["^ ","~:x",6.70000009983778,"~:y",1.0981536817068416],["^ ","~:x",6.800000101327896,"~:y",1.6602070423863446],["^ ","~:x",6.900000102818012,"~:y",2.308689374977461],["^ ","~:x",7.000000104308128,"~:y",3.0214205045940603],["^ ","~:x",7.1000001057982445,"~:y",3.77291142228647],["^ ","~:x",7.200000107288361,"~:y",4.5353432958990245],["^ ","~:x",7.300000108778477,"~:y",5.2796706428663045],["^ ","~:x",7.400000110268593,"~:y",5.976804919197644],["^ ","~:x",7.500000111758709,"~:y",6.598830316615712],["^ ","~:x",7.600000113248825,"~:y",7.120201060180292],["^ ","~:x",7.700000114738941,"~:y",7.518869109857416],["^ ","~:x",7.800000116229057,"~:y",7.777292951795491],["^ ","~:x",7.900000117719173,"~:y",7.883282087047769],["^ ","~:x",8.00000011920929,"~:y",7.830637763413025],["^ ","~:x",8.100000120699406,"~:y",7.619558237636681],["^ ","~:x",8.200000122189522,"~:y",7.256786107003342],["^ ","~:x",8.300000123679638,"~:y",6.755485647926689],["^ ","~:x",8.400000125169754,"~:y",6.134849225333044],["^ ","~:x",8.50000012665987,"~:y",5.419443232426153],["^ ","~:x",8.600000128149986,"~:y",4.638315207789705],["^ ","~:x",8.700000129640102,"~:y",3.823894277701979],["^ ","~:x",8.800000131130219,"~:y",3.0107264283034625],["^ ","~:x",8.900000132620335,"~:y",2.2340939073053003],["^ ","~:x",9.00000013411045,"~:y",1.528573929242129],["^ ","~:x",9.100000135600567,"~:y",0.9265955276366005],["^ ","~:x",9.200000137090683,"~:y",0.45705466575180215],["^ ","~:x",9.300000138580799,"~:y",0.1440464866800439],["^ ","~:x",9.400000140070915,"~:y",0.0057698589043499015],["^ ","~:x",9.500000141561031,"~:y",0.05365326597234279],["^ ","~:x",9.600000143051147,"~:y",0.2917428116738198],["^ ","~:x",9.700000144541264,"~:y",0.7163829732921025],["^ ","~:x",9.80000014603138,"~:y",1.316209126913524],["^ ","~:x",9.900000147521496,"~:y",2.0724582507409313]]]],"~:marks",[["^ ","^0","line","~:from",["^ ","^2","8f979a1d-53d7-49b8-a427-9cdfe501449d"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"~:y",["^ ","^>","y","^?","y"],"~:stroke",["^ ","~:value","#FF29D2"],"~:strokeWidth",["^ ","^A",2],"~:strokeOpacity",["^ ","^A",1]]]]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; **
;;; There's a histogram plot type as well. As above, it composes with list-plots well.
;; **

;; @@
(compose
 (histogram (repeatedly 1000 #(rand 10)) :color "steelblue" :bins 100 :normalize :probability-density)
 (plot (constantly 0.1) [0 10]))
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:width",null,"~:height",null,"~:padding",null,"~:scales",null,"~:axes",null,"^2",[["^ ","~:name","59ccd500-edf9-4052-9d0b-735301114bea","~:values",[["^ ","~:x",0,"~:y",0.1],["^ ","~:x",0.10000000149011612,"~:y",0.1],["^ ","~:x",0.20000000298023224,"~:y",0.1],["^ ","~:x",0.30000000447034836,"~:y",0.1],["^ ","~:x",0.4000000059604645,"~:y",0.1],["^ ","~:x",0.5000000074505806,"~:y",0.1],["^ ","~:x",0.6000000089406967,"~:y",0.1],["^ ","~:x",0.7000000104308128,"~:y",0.1],["^ ","~:x",0.800000011920929,"~:y",0.1],["^ ","~:x",0.9000000134110451,"~:y",0.1],["^ ","~:x",1.0000000149011612,"~:y",0.1],["^ ","~:x",1.1000000163912773,"~:y",0.1],["^ ","~:x",1.2000000178813934,"~:y",0.1],["^ ","~:x",1.3000000193715096,"~:y",0.1],["^ ","~:x",1.4000000208616257,"~:y",0.1],["^ ","~:x",1.5000000223517418,"~:y",0.1],["^ ","~:x",1.600000023841858,"~:y",0.1],["^ ","~:x",1.700000025331974,"~:y",0.1],["^ ","~:x",1.8000000268220901,"~:y",0.1],["^ ","~:x",1.9000000283122063,"~:y",0.1],["^ ","~:x",2.0000000298023224,"~:y",0.1],["^ ","~:x",2.1000000312924385,"~:y",0.1],["^ ","~:x",2.2000000327825546,"~:y",0.1],["^ ","~:x",2.3000000342726707,"~:y",0.1],["^ ","~:x",2.400000035762787,"~:y",0.1],["^ ","~:x",2.500000037252903,"~:y",0.1],["^ ","~:x",2.600000038743019,"~:y",0.1],["^ ","~:x",2.7000000402331352,"~:y",0.1],["^ ","~:x",2.8000000417232513,"~:y",0.1],["^ ","~:x",2.9000000432133675,"~:y",0.1],["^ ","~:x",3.0000000447034836,"~:y",0.1],["^ ","~:x",3.1000000461935997,"~:y",0.1],["^ ","~:x",3.200000047683716,"~:y",0.1],["^ ","~:x",3.300000049173832,"~:y",0.1],["^ ","~:x",3.400000050663948,"~:y",0.1],["^ ","~:x",3.500000052154064,"~:y",0.1],["^ ","~:x",3.6000000536441803,"~:y",0.1],["^ ","~:x",3.7000000551342964,"~:y",0.1],["^ ","~:x",3.8000000566244125,"~:y",0.1],["^ ","~:x",3.9000000581145287,"~:y",0.1],["^ ","~:x",4.000000059604645,"~:y",0.1],["^ ","~:x",4.100000061094761,"~:y",0.1],["^ ","~:x",4.200000062584877,"~:y",0.1],["^ ","~:x",4.300000064074993,"~:y",0.1],["^ ","~:x",4.400000065565109,"~:y",0.1],["^ ","~:x",4.500000067055225,"~:y",0.1],["^ ","~:x",4.6000000685453415,"~:y",0.1],["^ ","~:x",4.700000070035458,"~:y",0.1],["^ ","~:x",4.800000071525574,"~:y",0.1],["^ ","~:x",4.90000007301569,"~:y",0.1],["^ ","~:x",5.000000074505806,"~:y",0.1],["^ ","~:x",5.100000075995922,"~:y",0.1],["^ ","~:x",5.200000077486038,"~:y",0.1],["^ ","~:x",5.300000078976154,"~:y",0.1],["^ ","~:x",5.4000000804662704,"~:y",0.1],["^ ","~:x",5.500000081956387,"~:y",0.1],["^ ","~:x",5.600000083446503,"~:y",0.1],["^ ","~:x",5.700000084936619,"~:y",0.1],["^ ","~:x",5.800000086426735,"~:y",0.1],["^ ","~:x",5.900000087916851,"~:y",0.1],["^ ","~:x",6.000000089406967,"~:y",0.1],["^ ","~:x",6.100000090897083,"~:y",0.1],["^ ","~:x",6.200000092387199,"~:y",0.1],["^ ","~:x",6.3000000938773155,"~:y",0.1],["^ ","~:x",6.400000095367432,"~:y",0.1],["^ ","~:x",6.500000096857548,"~:y",0.1],["^ ","~:x",6.600000098347664,"~:y",0.1],["^ ","~:x",6.70000009983778,"~:y",0.1],["^ ","~:x",6.800000101327896,"~:y",0.1],["^ ","~:x",6.900000102818012,"~:y",0.1],["^ ","~:x",7.000000104308128,"~:y",0.1],["^ ","~:x",7.1000001057982445,"~:y",0.1],["^ ","~:x",7.200000107288361,"~:y",0.1],["^ ","~:x",7.300000108778477,"~:y",0.1],["^ ","~:x",7.400000110268593,"~:y",0.1],["^ ","~:x",7.500000111758709,"~:y",0.1],["^ ","~:x",7.600000113248825,"~:y",0.1],["^ ","~:x",7.700000114738941,"~:y",0.1],["^ ","~:x",7.800000116229057,"~:y",0.1],["^ ","~:x",7.900000117719173,"~:y",0.1],["^ ","~:x",8.00000011920929,"~:y",0.1],["^ ","~:x",8.100000120699406,"~:y",0.1],["^ ","~:x",8.200000122189522,"~:y",0.1],["^ ","~:x",8.300000123679638,"~:y",0.1],["^ ","~:x",8.400000125169754,"~:y",0.1],["^ ","~:x",8.50000012665987,"~:y",0.1],["^ ","~:x",8.600000128149986,"~:y",0.1],["^ ","~:x",8.700000129640102,"~:y",0.1],["^ ","~:x",8.800000131130219,"~:y",0.1],["^ ","~:x",8.900000132620335,"~:y",0.1],["^ ","~:x",9.00000013411045,"~:y",0.1],["^ ","~:x",9.100000135600567,"~:y",0.1],["^ ","~:x",9.200000137090683,"~:y",0.1],["^ ","~:x",9.300000138580799,"~:y",0.1],["^ ","~:x",9.400000140070915,"~:y",0.1],["^ ","~:x",9.500000141561031,"~:y",0.1],["^ ","~:x",9.600000143051147,"~:y",0.1],["^ ","~:x",9.700000144541264,"~:y",0.1],["^ ","~:x",9.80000014603138,"~:y",0.1],["^ ","~:x",9.900000147521496,"~:y",0.1]]]],"~:marks",[["^ ","^0","line","~:from",["^ ","^2","59ccd500-edf9-4052-9d0b-735301114bea"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"~:y",["^ ","^>","y","^?","y"],"~:stroke",["^ ","~:value","#FF29D2"],"~:strokeWidth",["^ ","^A",2],"~:strokeOpacity",["^ ","^A",1]]]]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; **
;;; Something a little fancier!
;; **

;; @@
(defn gaussian
  [x sigma mu]
  (* (/ 0.4 sigma) (Math/exp (- (/ (* (- x mu) (- x mu)) (* 2 (* sigma sigma)))))))
;; @@
;; =>
;;; ["^ ","~:type","html","~:content",["span",["^ ","~:class","clj-var"],"#'pinkgorilla.demo.gorilla-plot/gaussian"],"~:value","#'pinkgorilla.demo.gorilla-plot/gaussian"]
;; <=

;; @@
(compose
  (histogram (repeatedly 10000 #(- (apply + (repeatedly 50 rand)) 25))
             :bins 100
             :normalise :probability-density)
  (plot #(gaussian % 2 0) [-10 10]))
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:width",null,"~:height",null,"~:padding",null,"~:scales",null,"~:axes",null,"^2",[["^ ","~:name","1e394964-00b4-42c2-8cfe-0d9a1f2b29f0","~:values",[["^ ","~:x",-10,"~:y",7.453306344157342e-7],["^ ","~:x",-9.799999997019768,"~:y",0.0000012227136022020082],["^ ","~:x",-9.599999994039536,"~:y",0.0000019859008895787535],["^ ","~:x",-9.399999991059303,"~:y",0.0000031933568466554097],["^ ","~:x",-9.199999988079071,"~:y",0.000005083869442630077],["^ ","~:x",-8.999999985098839,"~:y",0.000008013059747248974],["^ ","~:x",-8.799999982118607,"~:y",0.000012504301246871565],["^ ","~:x",-8.599999979138374,"~:y",0.000019318683610927946],["^ ","~:x",-8.399999976158142,"~:y",0.000029549673525896843],["^ ","~:x",-8.19999997317791,"~:y",0.00004474916120466938],["^ ","~:x",-7.999999970197678,"~:y",0.00006709252957952864],["^ ","~:x",-7.799999967217445,"~:y",0.00009959109066711276],["^ ","~:x",-7.599999964237213,"~:y",0.0001463604937211866],["^ ","~:x",-7.399999961256981,"~:y",0.0002129532625969202],["^ ","~:x",-7.199999958276749,"~:y",0.00030676215890329826],["^ ","~:x",-6.999999955296516,"~:y",0.00043749825786254407],["^ ","~:x",-6.799999952316284,"~:y",0.0006177431317230414],["^ ","~:x",-6.599999949336052,"~:y",0.0008635680737170301],["^ ","~:x",-6.39999994635582,"~:y",0.0011952046815864247],["^ ","~:x",-6.1999999433755875,"~:y",0.0016377403466157404],["^ ","~:x",-5.999999940395355,"~:y",0.002221799506292808],["^ ","~:x",-5.799999937415123,"~:y",0.002984157484620092],["^ ","~:x",-5.599999934434891,"~:y",0.003968219313121465],["^ ","~:x",-5.3999999314546585,"~:y",0.005224282454218924],["^ ","~:x",-5.199999928474426,"~:y",0.006809491580088464],["^ ","~:x",-4.999999925494194,"~:y",0.008787387543070678],["^ ","~:x",-4.799999922513962,"~:y",0.011226953610745277],["^ ","~:x",-4.5999999195337296,"~:y",0.014201072062040727],["^ ","~:x",-4.399999916553497,"~:y",0.017784325124320887],["^ ","~:x",-4.199999913573265,"~:y",0.022050107061901632],["^ ","~:x",-3.999999910593033,"~:y",0.027067059067306068],["^ ","~:x",-3.7999999076128006,"~:y",0.032894894202544614],["^ ","~:x",-3.5999999046325684,"~:y",0.03957974321387936],["^ ","~:x",-3.399999901652336,"~:y",0.04714921925263572],["^ ","~:x",-3.199999898672104,"~:y",0.0556074645983085],["^ ","~:x",-2.9999998956918716,"~:y",0.06493049855125375],["^ ","~:x",-2.7999998927116394,"~:y",0.07506222540759178],["^ ","~:x",-2.599999889731407,"~:y",0.08591147779981703],["^ ","~:x",-2.399999886751175,"~:y",0.09735045780688895],["^ ","~:x",-2.1999998837709427,"~:y",0.10921489230961066],["^ ","~:x",-1.9999998807907104,"~:y",0.12130613917293559],["^ ","~:x",-1.7999998778104782,"~:y",0.13339536950647682],["^ ","~:x",-1.599999874830246,"~:y",0.1452298146860898],["^ ","~:x",-1.3999998718500137,"~:y",0.1565409146696238],["^ ","~:x",-1.1999998688697815,"~:y",0.1670540488540041],["^ ","~:x",-0.9999998658895493,"~:y",0.17649938643452168],["^ ","~:x",-0.799999862909317,"~:y",0.18462327433935283],["^ ","~:x",-0.5999998599290848,"~:y",0.1911995003838428],["^ ","~:x",-0.39999985694885254,"~:y",0.19603973746572148],["^ ","~:x",-0.1999998539686203,"~:y",0.19900249729156638],["^ ","~:x",1.4901161193847656e-7,"~:y",0.19999999999999946],["^ ","~:x",0.20000015199184418,"~:y",0.1990024943261981],["^ ","~:x",0.4000001549720764,"~:y",0.19603973162328203],["^ ","~:x",0.6000001579523087,"~:y",0.19119949183655915],["^ ","~:x",0.8000001609325409,"~:y",0.1846232633349483],["^ ","~:x",1.0000001639127731,"~:y",0.1764993732842929],["^ ","~:x",1.2000001668930054,"~:y",0.1670540339182087],["^ ","~:x",1.4000001698732376,"~:y",0.15654089834113458],["^ ","~:x",1.6000001728534698,"~:y",0.14522979737334754],["^ ","~:x",1.800000175833702,"~:y",0.1333953516167646],["^ ","~:x",2.0000001788139343,"~:y",0.12130612109691333],["^ ","~:x",2.2000001817941666,"~:y",0.109214874407896],["^ ","~:x",2.400000184774399,"~:y",0.09735044039927186],["^ ","~:x",2.600000187754631,"~:y",0.08591146115746827],["^ ","~:x",2.8000001907348633,"~:y",0.07506220974839269],["^ ","~:x",3.0000001937150955,"~:y",0.06493048403815777],["^ ","~:x",3.2000001966953278,"~:y",0.055607451340457185],["^ ","~:x",3.40000019967556,"~:y",0.04714920730880908],["^ ","~:x",3.6000002026557922,"~:y",0.03957973259776622],["^ ","~:x",3.8000002056360245,"~:y",0.03289488488927549],["^ ","~:x",4.000000208616257,"~:y",0.02706705100069495],["^ ","~:x",4.200000211596489,"~:y",0.02205010016188641],["^ ","~:x",4.400000214576721,"~:y",0.017784319294165653],["^ ","~:x",4.600000217556953,"~:y",0.014201067194954814],["^ ","~:x",4.800000220537186,"~:y",0.011226949595674444],["^ ","~:x",5.000000223517418,"~:y",0.008787384269514283],["^ ","~:x",5.20000022649765,"~:y",0.006809488941886312],["^ ","~:x",5.400000229477882,"~:y",0.0052242803523266925],["^ ","~:x",5.600000232458115,"~:y",0.003968217657451668],["^ ","~:x",5.800000235438347,"~:y",0.002984156195065413],["^ ","~:x",6.000000238418579,"~:y",0.0022217985130712366],["^ ","~:x",6.200000241398811,"~:y",0.001637739590084685],["^ ","~:x",6.400000244379044,"~:y",0.0011952041116685484],["^ ","~:x",6.600000247359276,"~:y",0.0008635676490676143],["^ ","~:x",6.800000250339508,"~:y",0.0006177428187500568],["^ ","~:x",7.00000025331974,"~:y",0.00043749802968947785],["^ ","~:x",7.2000002562999725,"~:y",0.00030676199434329435],["^ ","~:x",7.400000259280205,"~:y",0.00021295314518666783],["^ ","~:x",7.600000262260437,"~:y",0.000146360410845439],["^ ","~:x",7.800000265240669,"~:y",0.00009959103279023577],["^ ","~:x",8.000000268220901,"~:y",0.00006709248958927605],["^ ","~:x",8.200000271201134,"~:y",0.0000447491338652843],["^ ","~:x",8.400000274181366,"~:y",0.000029549655032275533],["^ ","~:x",8.600000277161598,"~:y",0.000019318671232486508],["^ ","~:x",8.80000028014183,"~:y",0.000012504293048415349],["^ ","~:x",9.000000283122063,"~:y",0.000008013054374075417],["^ ","~:x",9.200000286102295,"~:y",0.000005083865957875547],["^ ","~:x",9.400000289082527,"~:y",0.000003193354610174078],["^ ","~:x",9.60000029206276,"~:y",0.0000019858994691522355],["^ ","~:x",9.800000295042992,"~:y",0.0000012227127094295497]]]],"~:marks",[["^ ","^0","line","~:from",["^ ","^2","1e394964-00b4-42c2-8cfe-0d9a1f2b29f0"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"~:y",["^ ","^>","y","^?","y"],"~:stroke",["^ ","~:value","#FF29D2"],"~:strokeWidth",["^ ","^A",2],"~:strokeOpacity",["^ ","^A",1]]]]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; @@
(compose
  (histogram (repeatedly 10000 #(- (apply + (repeatedly 50 rand)) 25))
             :bins 100
             :normalise :probability-density)
  (histogram (repeatedly 10000 #(- (apply + (repeatedly 50 rand)) 23))
             :bins 100
             :normalise :probability-density
             :colour "green")
  (plot #(gaussian % 2 0) [-10 10])
  (plot #(gaussian % 2 2) [-10 10] :colour "orange"))
;; @@
;; =>
;;; ["^ ","~:type","jsscript","~:content",["^ ","~:data",["^ ","~:width",null,"~:height",null,"~:padding",null,"~:scales",null,"~:axes",null,"^2",[["^ ","~:name","4c567124-e5c2-40a7-9552-27af76f41297","~:values",[["^ ","~:x",-10,"~:y",7.453306344157342e-7],["^ ","~:x",-9.799999997019768,"~:y",0.0000012227136022020082],["^ ","~:x",-9.599999994039536,"~:y",0.0000019859008895787535],["^ ","~:x",-9.399999991059303,"~:y",0.0000031933568466554097],["^ ","~:x",-9.199999988079071,"~:y",0.000005083869442630077],["^ ","~:x",-8.999999985098839,"~:y",0.000008013059747248974],["^ ","~:x",-8.799999982118607,"~:y",0.000012504301246871565],["^ ","~:x",-8.599999979138374,"~:y",0.000019318683610927946],["^ ","~:x",-8.399999976158142,"~:y",0.000029549673525896843],["^ ","~:x",-8.19999997317791,"~:y",0.00004474916120466938],["^ ","~:x",-7.999999970197678,"~:y",0.00006709252957952864],["^ ","~:x",-7.799999967217445,"~:y",0.00009959109066711276],["^ ","~:x",-7.599999964237213,"~:y",0.0001463604937211866],["^ ","~:x",-7.399999961256981,"~:y",0.0002129532625969202],["^ ","~:x",-7.199999958276749,"~:y",0.00030676215890329826],["^ ","~:x",-6.999999955296516,"~:y",0.00043749825786254407],["^ ","~:x",-6.799999952316284,"~:y",0.0006177431317230414],["^ ","~:x",-6.599999949336052,"~:y",0.0008635680737170301],["^ ","~:x",-6.39999994635582,"~:y",0.0011952046815864247],["^ ","~:x",-6.1999999433755875,"~:y",0.0016377403466157404],["^ ","~:x",-5.999999940395355,"~:y",0.002221799506292808],["^ ","~:x",-5.799999937415123,"~:y",0.002984157484620092],["^ ","~:x",-5.599999934434891,"~:y",0.003968219313121465],["^ ","~:x",-5.3999999314546585,"~:y",0.005224282454218924],["^ ","~:x",-5.199999928474426,"~:y",0.006809491580088464],["^ ","~:x",-4.999999925494194,"~:y",0.008787387543070678],["^ ","~:x",-4.799999922513962,"~:y",0.011226953610745277],["^ ","~:x",-4.5999999195337296,"~:y",0.014201072062040727],["^ ","~:x",-4.399999916553497,"~:y",0.017784325124320887],["^ ","~:x",-4.199999913573265,"~:y",0.022050107061901632],["^ ","~:x",-3.999999910593033,"~:y",0.027067059067306068],["^ ","~:x",-3.7999999076128006,"~:y",0.032894894202544614],["^ ","~:x",-3.5999999046325684,"~:y",0.03957974321387936],["^ ","~:x",-3.399999901652336,"~:y",0.04714921925263572],["^ ","~:x",-3.199999898672104,"~:y",0.0556074645983085],["^ ","~:x",-2.9999998956918716,"~:y",0.06493049855125375],["^ ","~:x",-2.7999998927116394,"~:y",0.07506222540759178],["^ ","~:x",-2.599999889731407,"~:y",0.08591147779981703],["^ ","~:x",-2.399999886751175,"~:y",0.09735045780688895],["^ ","~:x",-2.1999998837709427,"~:y",0.10921489230961066],["^ ","~:x",-1.9999998807907104,"~:y",0.12130613917293559],["^ ","~:x",-1.7999998778104782,"~:y",0.13339536950647682],["^ ","~:x",-1.599999874830246,"~:y",0.1452298146860898],["^ ","~:x",-1.3999998718500137,"~:y",0.1565409146696238],["^ ","~:x",-1.1999998688697815,"~:y",0.1670540488540041],["^ ","~:x",-0.9999998658895493,"~:y",0.17649938643452168],["^ ","~:x",-0.799999862909317,"~:y",0.18462327433935283],["^ ","~:x",-0.5999998599290848,"~:y",0.1911995003838428],["^ ","~:x",-0.39999985694885254,"~:y",0.19603973746572148],["^ ","~:x",-0.1999998539686203,"~:y",0.19900249729156638],["^ ","~:x",1.4901161193847656e-7,"~:y",0.19999999999999946],["^ ","~:x",0.20000015199184418,"~:y",0.1990024943261981],["^ ","~:x",0.4000001549720764,"~:y",0.19603973162328203],["^ ","~:x",0.6000001579523087,"~:y",0.19119949183655915],["^ ","~:x",0.8000001609325409,"~:y",0.1846232633349483],["^ ","~:x",1.0000001639127731,"~:y",0.1764993732842929],["^ ","~:x",1.2000001668930054,"~:y",0.1670540339182087],["^ ","~:x",1.4000001698732376,"~:y",0.15654089834113458],["^ ","~:x",1.6000001728534698,"~:y",0.14522979737334754],["^ ","~:x",1.800000175833702,"~:y",0.1333953516167646],["^ ","~:x",2.0000001788139343,"~:y",0.12130612109691333],["^ ","~:x",2.2000001817941666,"~:y",0.109214874407896],["^ ","~:x",2.400000184774399,"~:y",0.09735044039927186],["^ ","~:x",2.600000187754631,"~:y",0.08591146115746827],["^ ","~:x",2.8000001907348633,"~:y",0.07506220974839269],["^ ","~:x",3.0000001937150955,"~:y",0.06493048403815777],["^ ","~:x",3.2000001966953278,"~:y",0.055607451340457185],["^ ","~:x",3.40000019967556,"~:y",0.04714920730880908],["^ ","~:x",3.6000002026557922,"~:y",0.03957973259776622],["^ ","~:x",3.8000002056360245,"~:y",0.03289488488927549],["^ ","~:x",4.000000208616257,"~:y",0.02706705100069495],["^ ","~:x",4.200000211596489,"~:y",0.02205010016188641],["^ ","~:x",4.400000214576721,"~:y",0.017784319294165653],["^ ","~:x",4.600000217556953,"~:y",0.014201067194954814],["^ ","~:x",4.800000220537186,"~:y",0.011226949595674444],["^ ","~:x",5.000000223517418,"~:y",0.008787384269514283],["^ ","~:x",5.20000022649765,"~:y",0.006809488941886312],["^ ","~:x",5.400000229477882,"~:y",0.0052242803523266925],["^ ","~:x",5.600000232458115,"~:y",0.003968217657451668],["^ ","~:x",5.800000235438347,"~:y",0.002984156195065413],["^ ","~:x",6.000000238418579,"~:y",0.0022217985130712366],["^ ","~:x",6.200000241398811,"~:y",0.001637739590084685],["^ ","~:x",6.400000244379044,"~:y",0.0011952041116685484],["^ ","~:x",6.600000247359276,"~:y",0.0008635676490676143],["^ ","~:x",6.800000250339508,"~:y",0.0006177428187500568],["^ ","~:x",7.00000025331974,"~:y",0.00043749802968947785],["^ ","~:x",7.2000002562999725,"~:y",0.00030676199434329435],["^ ","~:x",7.400000259280205,"~:y",0.00021295314518666783],["^ ","~:x",7.600000262260437,"~:y",0.000146360410845439],["^ ","~:x",7.800000265240669,"~:y",0.00009959103279023577],["^ ","~:x",8.000000268220901,"~:y",0.00006709248958927605],["^ ","~:x",8.200000271201134,"~:y",0.0000447491338652843],["^ ","~:x",8.400000274181366,"~:y",0.000029549655032275533],["^ ","~:x",8.600000277161598,"~:y",0.000019318671232486508],["^ ","~:x",8.80000028014183,"~:y",0.000012504293048415349],["^ ","~:x",9.000000283122063,"~:y",0.000008013054374075417],["^ ","~:x",9.200000286102295,"~:y",0.000005083865957875547],["^ ","~:x",9.400000289082527,"~:y",0.000003193354610174078],["^ ","~:x",9.60000029206276,"~:y",0.0000019858994691522355],["^ ","~:x",9.800000295042992,"~:y",0.0000012227127094295497]]],["^ ","^8","8ee64555-4dc1-4644-bdbb-3f1c8556890b","^9",[["^ ","~:x",-10,"~:y",3.045995948942526e-9],["^ ","~:x",-9.799999997019768,"~:y",5.522484962208031e-9],["^ ","~:x",-9.599999994039536,"~:y",9.912810809691382e-9],["^ ","~:x",-9.399999991059303,"~:y",1.7616358841803305e-8],["^ ","~:x",-9.199999988079071,"~:y",3.099506374862979e-8],["^ ","~:x",-8.999999985098839,"~:y",5.399157227973733e-8],["^ ","~:x",-8.799999982118607,"~:y",9.31143188111988e-8],["^ ","~:x",-8.599999979138374,"~:y",1.5898788109635867e-7],["^ ","~:x",-8.399999976158142,"~:y",2.68762472186575e-7],["^ ","~:x",-8.19999997317791,"~:y",4.4981122417190456e-7],["^ ","~:x",-7.999999970197678,"~:y",7.45330689947196e-7],["^ ","~:x",-7.799999967217445,"~:y",0.0000012227136914792885],["^ ","~:x",-7.599999964237213,"~:y",0.0000019859010316214617],["^ ","~:x",-7.399999961256981,"~:y",0.0000031933570703036276],["^ ","~:x",-7.199999958276749,"~:y",0.000005083869791105649],["^ ","~:x",-6.999999955296516,"~:y",0.00000801306028456652],["^ ","~:x",-6.799999952316284,"~:y",0.000012504302066717465],["^ ","~:x",-6.599999949336052,"~:y",0.00001931868484877249],["^ ","~:x",-6.39999994635582,"~:y",0.000029549675375259554],["^ ","~:x",-6.1999999433755875,"~:y",0.00004474916393860878],["^ ","~:x",-5.999999940395355,"~:y",0.00006709253357855516],["^ ","~:x",-5.799999937415123,"~:y",0.00009959109645480218],["^ ","~:x",-5.599999934434891,"~:y",0.0001463605020087637],["^ ","~:x",-5.3999999314546585,"~:y",0.00021295327433794878],["^ ","~:x",-5.199999928474426,"~:y",0.0003067621753593031],["^ ","~:x",-4.999999925494194,"~:y",0.00043749828067985645],["^ ","~:x",-4.799999922513962,"~:y",0.0006177431630203478],["^ ","~:x",-4.5999999195337296,"~:y",0.0008635681161819818],["^ ","~:x",-4.399999916553497,"~:y",0.0011952047385782264],["^ ","~:x",-4.199999913573265,"~:y",0.001637740422268863],["^ ","~:x",-3.999999910593033,"~:y",0.002221799605614986],["^ ","~:x",-3.7999999076128006,"~:y",0.002984157613575588],["^ ","~:x",-3.5999999046325684,"~:y",0.003968219478688477],["^ ","~:x",-3.399999901652336,"~:y",0.0052242826644081876],["^ ","~:x",-3.199999898672104,"~:y",0.0068094918439087285],["^ ","~:x",-2.9999998956918716,"~:y",0.008787387870426376],["^ ","~:x",-2.7999998927116394,"~:y",0.011226954012252426],["^ ","~:x",-2.599999889731407,"~:y",0.014201072548749392],["^ ","~:x",-2.399999886751175,"~:y",0.017784325707336495],["^ ","~:x",-2.1999998837709427,"~:y",0.02205010775190324],["^ ","~:x",-1.9999998807907104,"~:y",0.027067059873967278],["^ ","~:x",-1.7999998778104782,"~:y",0.03289489513387163],["^ ","~:x",-1.599999874830246,"~:y",0.03957974427549078],["^ ","~:x",-1.3999998718500137,"~:y",0.0471492204470185],["^ ","~:x",-1.1999998688697815,"~:y",0.05560746592409373],["^ ","~:x",-0.9999998658895493,"~:y",0.06493050000256344],["^ ","~:x",-0.799999862909317,"~:y",0.07506222697351177],["^ ","~:x",-0.5999998599290848,"~:y",0.08591147946405198],["^ ","~:x",-0.39999985694885254,"~:y",0.0973504595476507],["^ ","~:x",-0.1999998539686203,"~:y",0.10921489409978216],["^ ","~:x",1.4901161193847656e-7,"~:y",0.12130614098053782],["^ ","~:x",0.20000015199184418,"~:y",0.133395371295448],["^ ","~:x",0.4000001549720764,"~:y",0.14522981641736396],["^ ","~:x",0.6000001579523087,"~:y",0.1565409163024726],["^ ","~:x",0.8000001609325409,"~:y",0.16705405034758353],["^ ","~:x",1.0000001639127731,"~:y",0.17649938774954438],["^ ","~:x",1.2000001668930054,"~:y",0.18462327543979307],["^ ","~:x",1.4000001698732376,"~:y",0.191199501238571],["^ ","~:x",1.6000001728534698,"~:y",0.19603973804996522],["^ ","~:x",1.800000175833702,"~:y",0.19900249758810298],["^ ","~:x",2.0000001788139343,"~:y",0.1999999999999992],["^ ","~:x",2.2000001817941666,"~:y",0.19900249402966103],["^ ","~:x",2.400000184774399,"~:y",0.19603973103903785],["^ ","~:x",2.600000187754631,"~:y",0.1911994909818306],["^ ","~:x",2.8000001907348633,"~:y",0.18462326223450765],["^ ","~:x",3.0000001937150955,"~:y",0.1764993719692699],["^ ","~:x",3.2000001966953278,"~:y",0.16705403242462902],["^ ","~:x",3.40000019967556,"~:y",0.15654089670828555],["^ ","~:x",3.6000002026557922,"~:y",0.14522979564207325],["^ ","~:x",3.8000002056360245,"~:y",0.13339534982779339],["^ ","~:x",4.000000208616257,"~:y",0.1213061192893111],["^ ","~:x",4.200000211596489,"~:y",0.10921487261772456],["^ ","~:x",4.400000214576721,"~:y",0.09735043865851022],["^ ","~:x",4.600000217556953,"~:y",0.08591145949323346],["^ ","~:x",4.800000220537186,"~:y",0.07506220818247286],["^ ","~:x",5.000000223517418,"~:y",0.06493048258684828],["^ ","~:x",5.20000022649765,"~:y",0.055607450014672155],["^ ","~:x",5.400000229477882,"~:y",0.04714920611442652],["^ ","~:x",5.600000232458115,"~:y",0.039579731536155016],["^ ","~:x",5.800000235438347,"~:y",0.032894883957948685],["^ ","~:x",6.000000238418579,"~:y",0.027067050194033934],["^ ","~:x",6.200000241398811,"~:y",0.02205009947188498],["^ ","~:x",6.400000244379044,"~:y",0.017784318711150215],["^ ","~:x",6.600000247359276,"~:y",0.0142010667082463],["^ ","~:x",6.800000250339508,"~:y",0.011226949194167425],["^ ","~:x",7.00000025331974,"~:y",0.0087873839421587],["^ ","~:x",7.2000002562999725,"~:y",0.0068094886780661465],["^ ","~:x",7.400000259280205,"~:y",0.005224280142137508],["^ ","~:x",7.600000262260437,"~:y",0.003968217491884721],["^ ","~:x",7.800000265240669,"~:y",0.0029841560661099708],["^ ","~:x",8.000000268220901,"~:y",0.0022217984137491015],["^ ","~:x",8.200000271201134,"~:y",0.0016377395144315963],["^ ","~:x",8.400000274181366,"~:y",0.0011952040546767745],["^ ","~:x",8.600000277161598,"~:y",0.0008635676066026832],["^ ","~:x",8.80000028014183,"~:y",0.0006177427874527661],["^ ","~:x",9.000000283122063,"~:y",0.0004374980068721774],["^ ","~:x",9.200000286102295,"~:y",0.0003067619778872984],["^ ","~:x",9.400000289082527,"~:y",0.00021295313344564596],["^ ","~:x",9.60000029206276,"~:y",0.00014636040255786668],["^ ","~:x",9.800000295042992,"~:y",0.00009959102700254978]]]],"~:marks",[["^ ","^0","line","~:from",["^ ","^2","4c567124-e5c2-40a7-9552-27af76f41297"],"~:encode",["^ ","~:enter",["^ ","~:x",["^ ","~:scale","x","~:field","x"],"~:y",["^ ","^>","y","^?","y"],"~:stroke",["^ ","~:value","#FF29D2"],"~:strokeWidth",["^ ","^A",2],"~:strokeOpacity",["^ ","^A",1]]]],["^ ","^0","line","^;",["^ ","^2","8ee64555-4dc1-4644-bdbb-3f1c8556890b"],"^<",["^ ","^=",["^ ","~:x",["^ ","^>","x","^?","x"],"~:y",["^ ","^>","y","^?","y"],"^@",["^ ","^A","orange"],"^B",["^ ","^A",2],"^C",["^ ","^A",1]]]]]],"~:module","\n  define([], function () {\n      return {\n         version: 'vega 0.0.4',\n         render: function (id_or_domel, data) {\n            var selector_or_domel = id_or_domel;\n            if (typeof id_or_domel === 'string' || id_or_domel instanceof String) {\n               selector_or_domel = '#'+ id_or_domel;\n               console.log ('vega-module is rendering to selector id: ' + selector_or_domel);\n            } else {\n               console.log ('vega-module is rendering to dom-element');\n            }\n            var dataJson = JSON.stringify(data)\n            console.log ('vega-module data: ' + dataJson);\n            require(['vega', 'vega-lite', 'vega-embed'], function(vega, vegaLite, vegaEmbed) {\n              vegaEmbed(selector_or_domel, data, {defaultStyle:true}).catch(function(em) {\n                  console.log('Error in Rendering Vega Spec: ' + em)\n                 });\n              }, function(err) {\n                console.log('Vega-Embed failed to load');\n            });\n         }\n      }\n  });\n"]]
;; <=

;; @@

;; @@
;; ->
;;; 
;; <-
